<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>nrfcxx: nrfcxx::sd::Broadcaster Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">nrfcxx
   &#160;<span id="projectnumber">0.1.0</span>
   </div>
   <div id="projectbrief">C++-17 Framework for Nordic nRF5 Devices</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacenrfcxx.html">nrfcxx</a></li><li class="navelem"><b>sd</b></li><li class="navelem"><a class="el" href="classnrfcxx_1_1sd_1_1Broadcaster.html">Broadcaster</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Data Fields</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a>  </div>
  <div class="headertitle">
<div class="title">nrfcxx::sd::Broadcaster Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Infrastructure that starts and stops the soft device and provides a main event loop for the application, exposed through <a class="el" href="classnrfcxx_1_1sd_1_1Broadcaster.html#af8135a53f8e4715307fa1bb6a18874a0" title="Construct a setter for the specified bits.">make_setter()</a>.  
 <a href="classnrfcxx_1_1sd_1_1Broadcaster.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="broadcaster_8hpp_source.html">nrfcxx/sd/broadcaster.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a7db81f9cc20f88a6d89f586909a0385b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnrfcxx_1_1sd_1_1Broadcaster.html#a7db81f9cc20f88a6d89f586909a0385b">Broadcaster</a> (const <a class="el" href="classnrfcxx_1_1systemState.html">systemState</a> &amp;cs)</td></tr>
<tr class="memdesc:a7db81f9cc20f88a6d89f586909a0385b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Instantiate the broadcaster instance.  <a href="#a7db81f9cc20f88a6d89f586909a0385b">More...</a><br /></td></tr>
<tr class="separator:a7db81f9cc20f88a6d89f586909a0385b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56762bb8942b690ff630fd37f3f66d1d"><td class="memItemLeft" align="right" valign="top"><a id="a56762bb8942b690ff630fd37f3f66d1d"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnrfcxx_1_1sd_1_1Broadcaster.html#a56762bb8942b690ff630fd37f3f66d1d">~Broadcaster</a> ()</td></tr>
<tr class="memdesc:a56762bb8942b690ff630fd37f3f66d1d"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classnrfcxx_1_1sd_1_1Broadcaster.html#a75ee8391ae6abbc688cc208d99ddfec8" title="Stop the broadcast infrastructure.">stop()</a> is invoked when broadcaster is destructed. <br /></td></tr>
<tr class="separator:a56762bb8942b690ff630fd37f3f66d1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8135a53f8e4715307fa1bb6a18874a0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacenrfcxx.html#aec2e5281eceb50c80579cc72a0b42e76">notifier_type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnrfcxx_1_1sd_1_1Broadcaster.html#af8135a53f8e4715307fa1bb6a18874a0">make_setter</a> (<a class="el" href="classnrfcxx_1_1event__set.html#a5063aa16473993fbf97f53696b744418">event_set::event_type</a> bits) const</td></tr>
<tr class="memdesc:af8135a53f8e4715307fa1bb6a18874a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a setter for the specified bits.  <a href="#af8135a53f8e4715307fa1bb6a18874a0">More...</a><br /></td></tr>
<tr class="separator:af8135a53f8e4715307fa1bb6a18874a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab281c71c722c39ea5363c0b7ebe5c84c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnrfcxx_1_1sd_1_1Broadcaster.html#ab281c71c722c39ea5363c0b7ebe5c84c">start</a> ()</td></tr>
<tr class="memdesc:ab281c71c722c39ea5363c0b7ebe5c84c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the broadcast infrastructure.  <a href="#ab281c71c722c39ea5363c0b7ebe5c84c">More...</a><br /></td></tr>
<tr class="separator:ab281c71c722c39ea5363c0b7ebe5c84c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75ee8391ae6abbc688cc208d99ddfec8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnrfcxx_1_1sd_1_1Broadcaster.html#a75ee8391ae6abbc688cc208d99ddfec8">stop</a> ()</td></tr>
<tr class="memdesc:a75ee8391ae6abbc688cc208d99ddfec8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop the broadcast infrastructure.  <a href="#a75ee8391ae6abbc688cc208d99ddfec8">More...</a><br /></td></tr>
<tr class="separator:a75ee8391ae6abbc688cc208d99ddfec8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70ec165b8dbd62c68b4d7195ee85b27d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classnrfcxx_1_1event__set__copy.html">event_set_copy</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnrfcxx_1_1sd_1_1Broadcaster.html#a70ec165b8dbd62c68b4d7195ee85b27d">wait_for_event</a> ()</td></tr>
<tr class="memdesc:a70ec165b8dbd62c68b4d7195ee85b27d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sleep until an event occurs.  <a href="#a70ec165b8dbd62c68b4d7195ee85b27d">More...</a><br /></td></tr>
<tr class="separator:a70ec165b8dbd62c68b4d7195ee85b27d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4148468d0fc4b38c73b9c99feca9827c"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnrfcxx_1_1sd_1_1Broadcaster.html#a4148468d0fc4b38c73b9c99feca9827c">vdd_mV</a> () const</td></tr>
<tr class="memdesc:a4148468d0fc4b38c73b9c99feca9827c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the most recently read system voltage.  <a href="#a4148468d0fc4b38c73b9c99feca9827c">More...</a><br /></td></tr>
<tr class="separator:a4148468d0fc4b38c73b9c99feca9827c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08c87c0fef080e5b19a67f2f0db23d5e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnrfcxx_1_1sd_1_1Broadcaster.html#a08c87c0fef080e5b19a67f2f0db23d5e">ram_delta</a> () const</td></tr>
<tr class="memdesc:a08c87c0fef080e5b19a67f2f0db23d5e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the difference between required and available soft-device RAM.  <a href="#a08c87c0fef080e5b19a67f2f0db23d5e">More...</a><br /></td></tr>
<tr class="separator:a08c87c0fef080e5b19a67f2f0db23d5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace0cd6112940d9b874163e6891705381"><td class="memItemLeft" align="right" valign="top"><a id="ace0cd6112940d9b874163e6891705381"></a>
const ble_gap_addr_t &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnrfcxx_1_1sd_1_1Broadcaster.html#ace0cd6112940d9b874163e6891705381">address</a> () const</td></tr>
<tr class="memdesc:ace0cd6112940d9b874163e6891705381"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reference the Bluetooth device address used in GAP. <br /></td></tr>
<tr class="separator:ace0cd6112940d9b874163e6891705381"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0800f40d1f04877c7517eb99594a4a1"><td class="memItemLeft" align="right" valign="top"><a id="ae0800f40d1f04877c7517eb99594a4a1"></a>
const ble_version_t &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnrfcxx_1_1sd_1_1Broadcaster.html#ae0800f40d1f04877c7517eb99594a4a1">fwid</a> () const</td></tr>
<tr class="memdesc:ae0800f40d1f04877c7517eb99594a4a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reference the firmware version structure collected during <a class="el" href="classnrfcxx_1_1sd_1_1Broadcaster.html#ab281c71c722c39ea5363c0b7ebe5c84c" title="Start the broadcast infrastructure.">start()</a>. <br /></td></tr>
<tr class="separator:ae0800f40d1f04877c7517eb99594a4a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a8822d8c3b20dfbf6234bec21754abf60"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnrfcxx_1_1sd_1_1Broadcaster.html#a8822d8c3b20dfbf6234bec21754abf60">state_setup</a> (const <a class="el" href="structnrfcxx_1_1systemState_1_1state__type.html">systemState::state_type</a> &amp;ss, bool is_reset, bool retained)</td></tr>
<tr class="memdesc:a8822d8c3b20dfbf6234bec21754abf60"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to maintain broadcaster state across resets.  <a href="#a8822d8c3b20dfbf6234bec21754abf60">More...</a><br /></td></tr>
<tr class="separator:a8822d8c3b20dfbf6234bec21754abf60"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr class="memitem:ad97b9183ca12daa83a36876f6e29d4fb"><td class="memItemLeft" align="right" valign="top"><a id="ad97b9183ca12daa83a36876f6e29d4fb"></a>
<a class="el" href="classnrfcxx_1_1sd_1_1SystemStateBeacon.html">SystemStateBeacon</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnrfcxx_1_1sd_1_1Broadcaster.html#ad97b9183ca12daa83a36876f6e29d4fb">sys_beacon</a></td></tr>
<tr class="memdesc:ad97b9183ca12daa83a36876f6e29d4fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">The owned system state beacon. <br /></td></tr>
<tr class="separator:ad97b9183ca12daa83a36876f6e29d4fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0f79d27ca26304b44773e9b58f8428c"><td class="memItemLeft" align="right" valign="top"><a id="ac0f79d27ca26304b44773e9b58f8428c"></a>
<a class="el" href="classnrfcxx_1_1sd_1_1TelemetryBeacon.html">TelemetryBeacon</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnrfcxx_1_1sd_1_1Broadcaster.html#ac0f79d27ca26304b44773e9b58f8428c">tlm_beacon</a></td></tr>
<tr class="memdesc:ac0f79d27ca26304b44773e9b58f8428c"><td class="mdescLeft">&#160;</td><td class="mdescRight">The owned telemetry beacon. <br /></td></tr>
<tr class="separator:ac0f79d27ca26304b44773e9b58f8428c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae5e8a995ff156b6391f16c454fec34e"><td class="memItemLeft" align="right" valign="top"><a id="aae5e8a995ff156b6391f16c454fec34e"></a>
<a class="el" href="classnrfcxx_1_1sd_1_1ApplicationIdBeacon.html">ApplicationIdBeacon</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnrfcxx_1_1sd_1_1Broadcaster.html#aae5e8a995ff156b6391f16c454fec34e">appid_beacon</a></td></tr>
<tr class="memdesc:aae5e8a995ff156b6391f16c454fec34e"><td class="mdescLeft">&#160;</td><td class="mdescRight">The owned application identity beacon. <br /></td></tr>
<tr class="separator:aae5e8a995ff156b6391f16c454fec34e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a429c036d85aeb8d23a6a01f9097bab15"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classnrfcxx_1_1sensor_1_1adc_1_1vdd.html">sensor::adc::vdd</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnrfcxx_1_1sd_1_1Broadcaster.html#a429c036d85aeb8d23a6a01f9097bab15">vdd_sensor</a></td></tr>
<tr class="memdesc:a429c036d85aeb8d23a6a01f9097bab15"><td class="mdescLeft">&#160;</td><td class="mdescRight">A sensor instance that collects Vdd information for <a class="el" href="classnrfcxx_1_1sd_1_1TelemetryBeacon.html" title="Beacon providing telemetry information.">TelemetryBeacon</a>.  <a href="#a429c036d85aeb8d23a6a01f9097bab15">More...</a><br /></td></tr>
<tr class="separator:a429c036d85aeb8d23a6a01f9097bab15"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a31629f3f98fa98dacc036ff0a36b01dd"><td class="memItemLeft" align="right" valign="top">static constexpr <a class="el" href="classnrfcxx_1_1event__set.html#a5063aa16473993fbf97f53696b744418">event_set::event_type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnrfcxx_1_1sd_1_1Broadcaster.html#a31629f3f98fa98dacc036ff0a36b01dd">EVT_SD</a> = 0x0010</td></tr>
<tr class="memdesc:a31629f3f98fa98dacc036ff0a36b01dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Event informing the application that a soft-device interrupt has occured.  <a href="#a31629f3f98fa98dacc036ff0a36b01dd">More...</a><br /></td></tr>
<tr class="separator:a31629f3f98fa98dacc036ff0a36b01dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a885ef503cfb1305696bb67917d3faeca"><td class="memItemLeft" align="right" valign="top">static constexpr <a class="el" href="classnrfcxx_1_1event__set.html#a5063aa16473993fbf97f53696b744418">event_set::event_type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnrfcxx_1_1sd_1_1Broadcaster.html#a885ef503cfb1305696bb67917d3faeca">EVT_RADIO_ON</a> = 0x0020</td></tr>
<tr class="memdesc:a885ef503cfb1305696bb67917d3faeca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Event set when the radio has turned on.  <a href="#a885ef503cfb1305696bb67917d3faeca">More...</a><br /></td></tr>
<tr class="separator:a885ef503cfb1305696bb67917d3faeca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae512eac59c11d78c0904231f22f32c85"><td class="memItemLeft" align="right" valign="top">static constexpr <a class="el" href="classnrfcxx_1_1event__set.html#a5063aa16473993fbf97f53696b744418">event_set::event_type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnrfcxx_1_1sd_1_1Broadcaster.html#ae512eac59c11d78c0904231f22f32c85">EVT_RADIO_OFF</a> = 0x0040</td></tr>
<tr class="memdesc:ae512eac59c11d78c0904231f22f32c85"><td class="mdescLeft">&#160;</td><td class="mdescRight">Event set when the radio has turned off.  <a href="#ae512eac59c11d78c0904231f22f32c85">More...</a><br /></td></tr>
<tr class="separator:ae512eac59c11d78c0904231f22f32c85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a93df045ab8b622697672b4f299d860"><td class="memItemLeft" align="right" valign="top">static constexpr <a class="el" href="classnrfcxx_1_1event__set.html#a5063aa16473993fbf97f53696b744418">event_set::event_type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnrfcxx_1_1sd_1_1Broadcaster.html#a1a93df045ab8b622697672b4f299d860">EVT_VDD_REQUIRED</a> = 0x0100</td></tr>
<tr class="memdesc:a1a93df045ab8b622697672b4f299d860"><td class="mdescLeft">&#160;</td><td class="mdescRight">Event set when the broadcaster requires an updated Vdd measurement.  <a href="#a1a93df045ab8b622697672b4f299d860">More...</a><br /></td></tr>
<tr class="separator:a1a93df045ab8b622697672b4f299d860"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a768dc9d682a38a68c2f79b421476f988"><td class="memItemLeft" align="right" valign="top">static constexpr <a class="el" href="classnrfcxx_1_1event__set.html#a5063aa16473993fbf97f53696b744418">event_set::event_type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnrfcxx_1_1sd_1_1Broadcaster.html#a768dc9d682a38a68c2f79b421476f988">EVT_VDD_UPDATED</a> = 0x0200</td></tr>
<tr class="memdesc:a768dc9d682a38a68c2f79b421476f988"><td class="mdescLeft">&#160;</td><td class="mdescRight">Event set when Vdd_mV() has been updated.  <a href="#a768dc9d682a38a68c2f79b421476f988">More...</a><br /></td></tr>
<tr class="separator:a768dc9d682a38a68c2f79b421476f988"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfc595f7f12bc2ff238299b9a95c6803"><td class="memItemLeft" align="right" valign="top">static constexpr <a class="el" href="classnrfcxx_1_1event__set.html#a5063aa16473993fbf97f53696b744418">event_set::event_type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnrfcxx_1_1sd_1_1Broadcaster.html#abfc595f7f12bc2ff238299b9a95c6803">EVT_APP_BASE</a> = 0x1000</td></tr>
<tr class="memdesc:abfc595f7f12bc2ff238299b9a95c6803"><td class="mdescLeft">&#160;</td><td class="mdescRight">Base event available for application use.  <a href="#abfc595f7f12bc2ff238299b9a95c6803">More...</a><br /></td></tr>
<tr class="separator:abfc595f7f12bc2ff238299b9a95c6803"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Infrastructure that starts and stops the soft device and provides a main event loop for the application, exposed through <a class="el" href="classnrfcxx_1_1sd_1_1Broadcaster.html#af8135a53f8e4715307fa1bb6a18874a0" title="Construct a setter for the specified bits.">make_setter()</a>. </p>
<p>It also supplies the maintenance operation for both owned and external <a class="el" href="classnrfcxx_1_1sd_1_1Beacon.html">beacons</a>, including (in preferred activation order):</p><ul>
<li><a class="el" href="classnrfcxx_1_1sd_1_1Broadcaster.html#ad97b9183ca12daa83a36876f6e29d4fb" title="The owned system state beacon.">sys_beacon</a></li>
<li><a class="el" href="classnrfcxx_1_1sd_1_1Broadcaster.html#ac0f79d27ca26304b44773e9b58f8428c" title="The owned telemetry beacon.">tlm_beacon</a></li>
<li><a class="el" href="classnrfcxx_1_1sd_1_1Broadcaster.html#aae5e8a995ff156b6391f16c454fec34e" title="The owned application identity beacon.">appid_beacon</a></li>
</ul>
<p>The owned beacons are created by the broadcaster, and their configurations may be changed by the application prior to <a class="el" href="classnrfcxx_1_1sd_1_1Broadcaster.html#ab281c71c722c39ea5363c0b7ebe5c84c">starting the broadcaster</a>. The beacons are <b>not</b> started along with the broadcaster; if the application desires them they should be <a class="el" href="classnrfcxx_1_1sd_1_1Beacon.html#a28e5d449ad5b026102173aded771205a">activated</a> once the broadcaster is running.</p>
<p>Any application-specific beacons may also be activated after <a class="el" href="classnrfcxx_1_1sd_1_1Broadcaster.html#ab281c71c722c39ea5363c0b7ebe5c84c" title="Start the broadcast infrastructure.">start()</a>. These do not need to be registered with the broadcaster.</p>
<p>Once activated the notifications associated with beacon maintenance are processed by the broadcaster's event loop. The application should invoke <a class="el" href="classnrfcxx_1_1sd_1_1Broadcaster.html#a70ec165b8dbd62c68b4d7195ee85b27d" title="Sleep until an event occurs.">wait_for_event()</a> in its main loop, to receive any <a class="el" href="classnrfcxx_1_1sd_1_1Broadcaster.html#af8135a53f8e4715307fa1bb6a18874a0">application-specific events</a> that it must process.</p>
<p>All owned beacons are <a class="el" href="classnrfcxx_1_1sd_1_1Beacon.html#af8aa2b2bfa7ca6abc04a518dff9ddbbe">deactivated</a> when the broadcaster is <a class="el" href="classnrfcxx_1_1sd_1_1Broadcaster.html#a75ee8391ae6abbc688cc208d99ddfec8">stopped</a>. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a7db81f9cc20f88a6d89f586909a0385b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7db81f9cc20f88a6d89f586909a0385b">&#9670;&nbsp;</a></span>Broadcaster()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">nrfcxx::sd::Broadcaster::Broadcaster </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classnrfcxx_1_1systemState.html">systemState</a> &amp;&#160;</td>
          <td class="paramname"><em>cs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Instantiate the broadcaster instance. </p>
<dl class="section warning"><dt>Warning</dt><dd>Attempts to instantiate a second instance will result in a <a class="el" href="namespacenrfcxx.html#a0c34d4f67cc579f14cc37908a6045c7ea14ea6e6b35ead7bc46af580985318a02" title="Application attempted to allocate more resources than available.">FailSafeCode::RESOURCE_VIOLATION</a> failsafe.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cs</td><td>reference to the application-controlled system state. Note that the application must have caused <a class="el" href="classnrfcxx_1_1sd_1_1Broadcaster.html#a8822d8c3b20dfbf6234bec21754abf60" title="Function to maintain broadcaster state across resets.">state_setup()</a> to be invoked when this state was initialized. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="af8135a53f8e4715307fa1bb6a18874a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8135a53f8e4715307fa1bb6a18874a0">&#9670;&nbsp;</a></span>make_setter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacenrfcxx.html#aec2e5281eceb50c80579cc72a0b42e76">notifier_type</a> nrfcxx::sd::Broadcaster::make_setter </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classnrfcxx_1_1event__set.html#a5063aa16473993fbf97f53696b744418">event_set::event_type</a>&#160;</td>
          <td class="paramname"><em>bits</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Construct a setter for the specified bits. </p>
<dl class="section warning"><dt>Warning</dt><dd><a class="el" href="namespacenrfcxx.html#a0c34d4f67cc579f14cc37908a6045c7eae7bd7892cac98851ed6047797be5ae34" title="Application tried something that isn&#39;t allowed.">FailSafeCode::API_VIOLATION</a> will occur if <code>bits</code> includes any bits reserved by the <a class="el" href="classnrfcxx_1_1sd_1_1Broadcaster.html" title="Infrastructure that starts and stops the soft device and provides a main event loop for the applicati...">Broadcaster</a> instance.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>the setter. </dd></dl>

</div>
</div>
<a id="a08c87c0fef080e5b19a67f2f0db23d5e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08c87c0fef080e5b19a67f2f0db23d5e">&#9670;&nbsp;</a></span>ram_delta()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int nrfcxx::sd::Broadcaster::ram_delta </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the difference between required and available soft-device RAM. </p>
<p>A postive value indicates that the amount of memory available is that much more than is required.</p>
<p>A negative value indicates that the amount of memory available must be increased by the absolute value in order to allow the system to run. In this case <a class="el" href="classnrfcxx_1_1sd_1_1Broadcaster.html#ab281c71c722c39ea5363c0b7ebe5c84c" title="Start the broadcast infrastructure.">start()</a> will fail with <code>NRF_ERROR_NO_MEM</code>.</p>
<dl class="section note"><dt>Note</dt><dd>This value is set by <a class="el" href="classnrfcxx_1_1sd_1_1Broadcaster.html#ab281c71c722c39ea5363c0b7ebe5c84c" title="Start the broadcast infrastructure.">start()</a>. </dd></dl>

</div>
</div>
<a id="ab281c71c722c39ea5363c0b7ebe5c84c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab281c71c722c39ea5363c0b7ebe5c84c">&#9670;&nbsp;</a></span>start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nrfcxx::sd::Broadcaster::start </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start the broadcast infrastructure. </p>
<dl class="section note"><dt>Note</dt><dd>This simply configures and enables the soft device. <a class="el" href="classnrfcxx_1_1sd_1_1Beacon.html#a28e5d449ad5b026102173aded771205a">Activating</a> any owned beacons is the responsibility of the application.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Zero on success. A positive value is a Nordic soft-device error code indicating why the broadcaster could not be started; a negative value indicates a failure in the infrastructure startup. </dd></dl>

</div>
</div>
<a id="a8822d8c3b20dfbf6234bec21754abf60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8822d8c3b20dfbf6234bec21754abf60">&#9670;&nbsp;</a></span>state_setup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void nrfcxx::sd::Broadcaster::state_setup </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structnrfcxx_1_1systemState_1_1state__type.html">systemState::state_type</a> &amp;&#160;</td>
          <td class="paramname"><em>ss</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_reset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>retained</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function to maintain broadcaster state across resets. </p>
<p>This must be invoked from the application's <a class="el" href="classnrfcxx_1_1systemState.html" title="A class supporting watchdog configuration and cross-reset retention of state.">systemState</a> <a class="el" href="">app_handler</a> to ensure <a class="el" href="classnrfcxx_1_1sd_1_1Beacon.html#a4bf80f06051a06ece8aaedc7d605241f">telemetry state</a> is properly managed. </p>

</div>
</div>
<a id="a75ee8391ae6abbc688cc208d99ddfec8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75ee8391ae6abbc688cc208d99ddfec8">&#9670;&nbsp;</a></span>stop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nrfcxx::sd::Broadcaster::stop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stop the broadcast infrastructure. </p>
<p>All owned beacons are <a class="el" href="">deactivated</a> during this process. </p>

</div>
</div>
<a id="a4148468d0fc4b38c73b9c99feca9827c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4148468d0fc4b38c73b9c99feca9827c">&#9670;&nbsp;</a></span>vdd_mV()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t nrfcxx::sd::Broadcaster::vdd_mV </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return the most recently read system voltage. </p>
<p>The value will be zero until the first sample of <a class="el" href="classnrfcxx_1_1sd_1_1Broadcaster.html#a429c036d85aeb8d23a6a01f9097bab15" title="A sensor instance that collects Vdd information for TelemetryBeacon.">vdd_sensor</a> completes. <a class="el" href="classnrfcxx_1_1sd_1_1Broadcaster.html#a768dc9d682a38a68c2f79b421476f988" title="Event set when Vdd_mV() has been updated.">EVT_VDD_UPDATED</a> is generated when the value changes.</p>
<dl class="section note"><dt>Note</dt><dd>The value stored here remains set until updated by another sample. However, each new value will be used only once <a class="el" href="">once</a> in a telemetry beacon. Respect <a class="el" href="classnrfcxx_1_1sd_1_1Broadcaster.html#a1a93df045ab8b622697672b4f299d860" title="Event set when the broadcaster requires an updated Vdd measurement.">EVT_VDD_REQUIRED</a>.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>the most recently read system voltage, in millivolts. </dd></dl>

</div>
</div>
<a id="a70ec165b8dbd62c68b4d7195ee85b27d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70ec165b8dbd62c68b4d7195ee85b27d">&#9670;&nbsp;</a></span>wait_for_event()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classnrfcxx_1_1event__set__copy.html">event_set_copy</a> nrfcxx::sd::Broadcaster::wait_for_event </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sleep until an event occurs. </p>
<p>This checks for pending events, and if none are available drops to the lowest power mode available and waits for an event. When an event is received the set of events is captured, all internal events are processed, and the remaining events are returned to the caller for processing.</p>
<dl class="section note"><dt>Note</dt><dd>The returned event set may be empty. </dd></dl>

</div>
</div>
<h2 class="groupheader">Field Documentation</h2>
<a id="abfc595f7f12bc2ff238299b9a95c6803"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abfc595f7f12bc2ff238299b9a95c6803">&#9670;&nbsp;</a></span>EVT_APP_BASE</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr <a class="el" href="classnrfcxx_1_1event__set.html#a5063aa16473993fbf97f53696b744418">event_set::event_type</a> nrfcxx::sd::Broadcaster::EVT_APP_BASE = 0x1000</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Base event available for application use. </p>
<p>The application may define and set events at or higher than this bit. For example: </p><pre class="fragment">#define EVT_SAMPLE (Broadcaster::EVT_APP_BASE &lt;&lt; 0)
#define EVT_PROCESS (Broadcaster::EVT_APP_BASE &lt;&lt; 1)
</pre> 
</div>
</div>
<a id="ae512eac59c11d78c0904231f22f32c85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae512eac59c11d78c0904231f22f32c85">&#9670;&nbsp;</a></span>EVT_RADIO_OFF</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr <a class="el" href="classnrfcxx_1_1event__set.html#a5063aa16473993fbf97f53696b744418">event_set::event_type</a> nrfcxx::sd::Broadcaster::EVT_RADIO_OFF = 0x0040</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Event set when the radio has turned off. </p>
<p>The application may ignore this event if it is not relevant. </p>

</div>
</div>
<a id="a885ef503cfb1305696bb67917d3faeca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a885ef503cfb1305696bb67917d3faeca">&#9670;&nbsp;</a></span>EVT_RADIO_ON</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr <a class="el" href="classnrfcxx_1_1event__set.html#a5063aa16473993fbf97f53696b744418">event_set::event_type</a> nrfcxx::sd::Broadcaster::EVT_RADIO_ON = 0x0020</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Event set when the radio has turned on. </p>
<p>The application may ignore this event if it is not relevant. </p>

</div>
</div>
<a id="a31629f3f98fa98dacc036ff0a36b01dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31629f3f98fa98dacc036ff0a36b01dd">&#9670;&nbsp;</a></span>EVT_SD</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr <a class="el" href="classnrfcxx_1_1event__set.html#a5063aa16473993fbf97f53696b744418">event_set::event_type</a> nrfcxx::sd::Broadcaster::EVT_SD = 0x0010</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Event informing the application that a soft-device interrupt has occured. </p>
<p>Such events are not expected for broadcasters, but probably should be handled anyway. </p>

</div>
</div>
<a id="a1a93df045ab8b622697672b4f299d860"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a93df045ab8b622697672b4f299d860">&#9670;&nbsp;</a></span>EVT_VDD_REQUIRED</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr <a class="el" href="classnrfcxx_1_1event__set.html#a5063aa16473993fbf97f53696b744418">event_set::event_type</a> nrfcxx::sd::Broadcaster::EVT_VDD_REQUIRED = 0x0100</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Event set when the broadcaster requires an updated Vdd measurement. </p>
<p>This event should be expected to fire shortly (nominally, 500 ms) before a <a class="el" href="classnrfcxx_1_1sd_1_1TelemetryBeacon.html" title="Beacon providing telemetry information.">TelemetryBeacon</a> is transmitted. Inspect <a class="el" href="classnrfcxx_1_1sd_1_1Broadcaster.html#ac0f79d27ca26304b44773e9b58f8428c" title="The owned telemetry beacon.">tlm_beacon</a> for transmission rates.</p>
<p>The application should initiate a sample using <a class="el" href="classnrfcxx_1_1sd_1_1Broadcaster.html#a429c036d85aeb8d23a6a01f9097bab15" title="A sensor instance that collects Vdd information for TelemetryBeacon.">vdd_sensor</a> as soon as feasible after the event is received.</p>
<p>Alternatively the application may calculate the voltage of the system power source (Vbatt, by preference) through other means and provide it to <a class="el" href="classnrfcxx_1_1sd_1_1Broadcaster.html#ac0f79d27ca26304b44773e9b58f8428c" title="The owned telemetry beacon.">tlm_beacon</a> via <a class="el" href="classnrfcxx_1_1sd_1_1TelemetryBeacon.html#ad009c0781ce2bc396489ab515c000f68" title="Provide a value for pwr_mV to be used in the next beacon.">TelemetryBeacon::update_pwr_mV()</a>.</p>
<p>If no power source voltage has been provided by the time the beacon content is formed the beacon will transmit a zero value. </p>

</div>
</div>
<a id="a768dc9d682a38a68c2f79b421476f988"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a768dc9d682a38a68c2f79b421476f988">&#9670;&nbsp;</a></span>EVT_VDD_UPDATED</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr <a class="el" href="classnrfcxx_1_1event__set.html#a5063aa16473993fbf97f53696b744418">event_set::event_type</a> nrfcxx::sd::Broadcaster::EVT_VDD_UPDATED = 0x0200</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Event set when Vdd_mV() has been updated. </p>
<p>This event will be provided after the application successfully initiates a <a class="el" href="classnrfcxx_1_1sensor_1_1adc_1_1vdd.html">sample</a> on <a class="el" href="classnrfcxx_1_1sd_1_1Broadcaster.html#a429c036d85aeb8d23a6a01f9097bab15" title="A sensor instance that collects Vdd information for TelemetryBeacon.">vdd_sensor</a>. </p>

</div>
</div>
<a id="a429c036d85aeb8d23a6a01f9097bab15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a429c036d85aeb8d23a6a01f9097bab15">&#9670;&nbsp;</a></span>vdd_sensor</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classnrfcxx_1_1sensor_1_1adc_1_1vdd.html">sensor::adc::vdd</a> nrfcxx::sd::Broadcaster::vdd_sensor</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A sensor instance that collects Vdd information for <a class="el" href="classnrfcxx_1_1sd_1_1TelemetryBeacon.html" title="Beacon providing telemetry information.">TelemetryBeacon</a>. </p>
<p>If this sensor is not used and the source voltage not provided through some other mechanism telemetry beacons will not provide source voltage.</p>
<p>The application is responsible for provisioning, enabling, and calibrating <a class="el" href="classnrfcxx_1_1periph_1_1ADC.html">periph::ADC</a>, and <a class="el" href="">claiming</a> and <a class="el" href="">releasing</a> the client in response to <a class="el" href="classnrfcxx_1_1sd_1_1Broadcaster.html#a1a93df045ab8b622697672b4f299d860" title="Event set when the broadcaster requires an updated Vdd measurement.">EVT_VDD_REQUIRED</a> events.</p>
<dl class="section note"><dt>Note</dt><dd><a class="el" href="classnrfcxx_1_1sd_1_1Broadcaster.html#a768dc9d682a38a68c2f79b421476f988" title="Event set when Vdd_mV() has been updated.">EVT_VDD_UPDATED</a> will be issued whenever this sensor completes a sample. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>nrfcxx/sd/<a class="el" href="broadcaster_8hpp_source.html">broadcaster.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.16
</small></address>
</body>
</html>
